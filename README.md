# Productionizing Machine Learning Models
This repo is the companion to a ChiPy Data SIG talk given on 06/19/2019, and contains:
1. A cookiecutter for productionizing machine learning models by creating a simple Flask API
2. An example model provided by this [excellent tutorial from Susan Li](https://towardsdatascience.com/develop-a-nlp-model-in-python-deploy-it-with-flask-step-by-step-744f3bdd7776)

## Cookiecutter Installation and Use
1. Install cookiecutter:
```python
pip install cookiecutter
```

2. Navigate to the directory you'd like to house your new model app locally. For example:
```bash
cd Projects
```

3. Use the cookiecutter to make your new project:
```python
cookiecutter gh:katie-simmons/productionizing-ml-models
```

NOTE: If you have MFA enabled on your github account, an error in cloning the repo may occur. The workaround is to clone this repo - or `cd` into your local `productionizing-ml-models` do a `git pull origin master` if you have already cloned it (remember to `cd ..` after pulling, as cookiecutter will be outputting to the current directory) - and use the cookiecutter locally:
```
git clone git@github.com:katie-simmons/productionizing-ml-models.git
```
```
cookiecutter ./productionizing-ml-models
```

This cookiecutter will provide you several prompts, all of which have default values which must be overridden unless they are autogenerated (noted below):

| prompt | description | example | notes |
| :--- | :---: | :---: | :--- |
| `author` | your name | Katie Simmons | optional |
| `email` | your email | katie@katie.codes | optional |
| `github_username` | your github username | katie-simmons | required |
| `project_name` | name of the project | Test Model | required |
| `repo_name` | name of the repo | test-model | autogenerated, provided `project_name` |
| `project_slug` | project name, with dashes in place of spaces | test-model | autogenerated, provided `project_name` |
| `project_short_description` | short description of project | This is a test. | optional |
| `release_date` | current date according to your computer's local time | x | autogenerated |
| `version` | version of project | 1.0.0 | defaults to 1.0.0; use semantic versioning |

1. Use the tree command (`brew install tree` if tree is not recognized) to ensure your project was created as expected:
```bash
tree your_project_name/
```

This command will show the directory structure of the new project you created with the cookiecutter:
```bash
your_project_name/
├── Dockerfile
├── README.md
├── app
│   ├── requirements.txt
│   ├── test_app.py
│   └── app.py
└── .gitignore
```

To illustrate, this is what creating a new project called `Test Model` looks on my system:
```
Katies-MacBook-Pro:Projects katiesimmons$ cookiecutter gh:katie-simmons/productionizing-ml-models
author [Your name]: Katie Simmons
email [your-name@provider.com]: katie@katie.codes
github_username [Your github username]: katie-simmons
project_name [Required unless you want your project to be named this string right here]: Test Model
repo_name [test_model]: 
project_slug [test_model]: 
project_short_description [A short description of the project]: This is a test for this cookiecutter.
release_date [2019-06-19]: 
version [1.0.0]: 
Katies-MacBook-Pro:Projects katiesimmons$ tree test-model/
test-model/
├── Dockerfile
├── README.md
├── app
│   ├── requirements.txt
│   ├── test_app.py
└── └── app.py

3 directories, 5 files
```

While the `.gitignore` is not shown by `tree`, it is also created and can be confirmed using `ls -al`:
```
Katies-MBP:Projects katiesimmons$ ls -al test-data-transformation/
total 24
drwxr-xr-x   7 katiesimmons  staff   224 Jun 19 09:15 .
drwxr-xr-x  18 katiesimmons  staff   576 Jun 19 09:15 ..
-rw-r--r--   1 katiesimmons  staff  1674 Jun 19 09:15 .gitignore
-rw-r--r--   1 katiesimmons  staff   429 Jun 19 09:15 Dockerfile
-rw-r--r--   1 katiesimmons  staff  2995 Jun 19 09:15 README.md
drwxr-xr-x   5 katiesimmons  staff   160 Jun 19 09:15 app
```

5. Customize your project before pushing to github as a new repo. For example, `app/app.py`, `app/test_app.py` and `README.md` will require updating, as denoted by the word `CHANGE`. Be sure to replace all occurences of `CHANGE` with more meaningful text.
